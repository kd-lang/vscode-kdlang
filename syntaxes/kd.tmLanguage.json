{"name":"Kd","scopeName":"source.kd","fileTypes":[".kd",".dh",".dsh",".dd","kd.mod"],"patterns":[{"include":"#comments"},{"include":"#function-decl"},{"include":"#as-is"},{"include":"#attributes"},{"include":"#assignment"},{"include":"#module-decl"},{"include":"#import-decl"},{"include":"#hash-decl"},{"include":"#brackets"},{"include":"#builtin-fix"},{"include":"#escaped-fix"},{"include":"#operators"},{"include":"#function-limited-overload-decl"},{"include":"#function-extend-decl"},{"include":"#function-exist"},{"include":"#generic"},{"include":"#constants"},{"include":"#type"},{"include":"#enum"},{"include":"#interface"},{"include":"#struct"},{"include":"#keywords"},{"include":"#storage"},{"include":"#numbers"},{"include":"#strings"},{"include":"#types"},{"include":"#punctuations"},{"include":"#variable-assign"},{"include":"#function-decl"}],"repository":{"as-is":{"begin":"\\s+(as|is)\\s+","beginCaptures":{"1":{"name":"keyword.$1.kd"}},"end":"([\\w.]*)","endCaptures":{"1":{"name":"entity.name.alias.kd"}}},"assignment":{"name":"meta.definition.variable.kd","match":"\\s+((?:\\:|\\+|\\-|\\*|/|\\%|\\&|\\||\\^)?=)\\s+","captures":{"1":{"patterns":[{"include":"#operators"}]}}},"attributes":{"name":"meta.definition.attribute.kd","match":"^\\s*((\\[)(deprecated|unsafe|console|heap|manualfree|typedef|live|inline|flag|ref_only|direct_array_access|callconv)(\\]))","captures":{"1":{"name":"meta.function.attribute.kd"},"2":{"name":"punctuation.definition.begin.bracket.square.kd"},"3":{"name":"storage.modifier.attribute.kd"},"4":{"name":"punctuation.definition.end.bracket.square.kd"}}},"variable-assign":{"match":"[a-zA-Z_]\\w*(?:,\\s*[a-zA-Z_]\\w*)*(?=\\s*(?:=|:=))","captures":{"0":{"patterns":[{"match":"[a-zA-Z_]\\w*","name":"variable.other.assignment.kd"},{"include":"#punctuation"}]}}},"module-decl":{"name":"meta.module.kd","begin":"^\\s*(module)\\s+","beginCaptures":{"1":{"name":"keyword.module.kd"}},"end":"([\\w.]+)","endCaptures":{"1":{"name":"entity.name.module.kd"}}},"import-decl":{"name":"meta.import.kd","begin":"^\\s*(import)\\s+","beginCaptures":{"1":{"name":"keyword.import.kd"}},"end":"([\\w.]+)","endCaptures":{"1":{"name":"entity.name.import.kd"}}},"hash-decl":{"name":"markup.bold.kd","begin":"^\\s*(#)","end":"$"},"brackets":{"patterns":[{"begin":"{","beginCaptures":{"0":{"name":"punctuation.definition.bracket.curly.begin.kd"}},"end":"}","endCaptures":{"0":{"name":"punctuation.definition.bracket.curly.end.kd"}},"patterns":[{"include":"$self"}]},{"begin":"\\(","beginCaptures":{"0":{"name":"punctuation.definition.bracket.round.begin.kd"}},"end":"\\)","endCaptures":{"0":{"name":"punctuation.definition.bracket.round.end.kd"}},"patterns":[{"include":"$self"}]},{"begin":"\\[","beginCaptures":{"0":{"name":"punctuation.definition.bracket.square.begin.kd"}},"end":"\\]","endCaptures":{"0":{"name":"punctuation.definition.bracket.square.end.kd"}},"patterns":[{"include":"$self"}]}]},"builtin-fix":{"patterns":[{"patterns":[{"name":"storage.modifier.kd","match":"(const)(?=\\s*\\()"},{"name":"keyword.$1.kd","match":"\\b(fn|type|enum|struct|union|interface|map|assert|sizeof|typeof|__offsetof)\\b(?=\\s*\\()"}]},{"patterns":[{"name":"keyword.control.kd","match":"(\\$if|\\$else)(?=\\s*\\()"},{"name":"keyword.control.kd","match":"\\b(as|in|is|or|break|continue|default|unsafe|match|if|else|for|go|goto|defer|return|shared|select|rlock|lock|atomic|asm)\\b(?=\\s*\\()"}]},{"patterns":[{"match":"(?<!.)(i?(?:8|16|nt|64|128)|u?(?:16|32|64|128)|f?(?:32|64))(?=\\s*\\()","captures":{"1":{"name":"storage.type.numeric.kd"}},"name":"meta.expr.numeric.cast.kd"},{"match":"(bool|byte|byteptr|charptr|voidptr|string|rune|size_t)(?=\\s*\\()","captures":{"1":{"name":"storage.type.$1.kd"}},"name":"meta.expr.bool.cast.kd"}]}]},"comments":{"patterns":[{"name":"comment.block.documentation.kd","begin":"/\\*","beginCaptures":{"0":{"name":"punctuation.definition.comment.begin.kd"}},"end":"\\*/","endCaptures":{"0":{"name":"punctuation.definition.comment.end.kd"}},"patterns":[{"include":"#comments"}]},{"name":"comment.line.double-slash.kd","begin":"//","beginCaptures":{"0":{"name":"punctuation.definition.comment.begin.kd"}},"end":"$"}]},"constants":{"name":"constant.language.kd","match":"\\b(true|false|none)\\b"},"generic":{"patterns":[{"name":"meta.definition.generic.kd","match":"(?<=[\\w\\s+])(\\<)(\\w+)(\\>)","captures":{"1":{"name":"punctuation.definition.bracket.angle.begin.kd"},"2":{"patterns":[{"include":"#illegal-name"},{"match":"\\w+","name":"entity.name.generic.kd"}]},"3":{"name":"punctuation.definition.bracket.angle.end.kd"}}}]},"function-decl":{"name":"meta.definition.function.kd","match":"^(\\bpub\\b\\s+)?(\\bfn\\b)\\s+(?:\\([^\\)]+\\)\\s+)?(?:(?:C\\.)?)(\\w+)\\s*((?<=[\\w\\s+])(\\<)(\\w+)(\\>))?","captures":{"1":{"name":"storage.modifier.kd"},"2":{"name":"keyword.fn.kd"},"3":{"name":"entity.name.function.kd"},"4":{"patterns":[{"include":"#generic"}]}}},"function-extend-decl":{"name":"meta.definition.function.kd","match":"^\\s*(pub)?\\s*(fn)\\s*(\\()([^\\)]*)(\\))\\s*(?:(?:C\\.)?)(\\w+)\\s*((?<=[\\w\\s+])(\\<)(\\w+)(\\>))?","captures":{"1":{"name":"storage.modifier.kd"},"2":{"name":"keyword.fn.kd"},"3":{"name":"punctuation.definition.bracket.round.begin.kd"},"4":{"patterns":[{"include":"#brackets"},{"include":"#storage"},{"include":"#generic"},{"include":"#types"},{"include":"#punctuation"}]},"5":{"name":"punctuation.definition.bracket.round.end.kd"},"6":{"patterns":[{"include":"#illegal-name"},{"match":"\\w+","name":"entity.name.function.kd"}]},"7":{"patterns":[{"include":"#generic"}]}}},"function-limited-overload-decl":{"name":"meta.definition.function.kd","match":"^\\s*(pub)?\\s*(fn)\\s*(\\()([^\\)]*)(\\))\\s*([\\+\\-\\*\\/])?\\s*(\\()([^\\)]*)(\\))\\s*(?:(?:C\\.)?)(\\w+)","captures":{"1":{"name":"storage.modifier.kd"},"2":{"name":"keyword.fn.kd"},"3":{"name":"punctuation.definition.bracket.round.begin.kd"},"4":{"patterns":[{"include":"#brackets"},{"include":"#storage"},{"include":"#generic"},{"include":"#types"},{"include":"#punctuation"}]},"5":{"name":"punctuation.definition.bracket.round.end.kd"},"6":{"patterns":[{"include":"#operators"}]},"7":{"name":"punctuation.definition.bracket.round.begin.kd"},"8":{"patterns":[{"include":"#brackets"},{"include":"#storage"},{"include":"#generic"},{"include":"#types"},{"include":"#punctuation"}]},"9":{"name":"punctuation.definition.bracket.round.end.kd"},"10":{"patterns":[{"include":"#illegal-name"},{"match":"\\w+","name":"entity.name.function.kd"}]}}},"function-exist":{"name":"meta.support.function.kd","match":"(\\w+)((?<=[\\w\\s+])(\\<)(\\w+)(\\>))?(?=\\s*\\()","captures":{"0":{"name":"meta.function.call.kd"},"1":{"patterns":[{"include":"#illegal-name"},{"match":"\\w+","name":"entity.name.function.kd"}]},"2":{"patterns":[{"include":"#generic"}]}}},"type":{"name":"meta.definition.type.kd","match":"^\\s*(?:(pub)?\\s+)?(type)\\s+(\\w*)\\s+(?:\\w+\\.+)?(\\w*)","captures":{"1":{"name":"storage.modifier.$1.kd"},"2":{"name":"storage.type.type.kd"},"3":{"patterns":[{"include":"#illegal-name"},{"include":"#types"},{"name":"entity.name.type.kd","match":"\\w+"}]},"4":{"patterns":[{"include":"#illegal-name"},{"include":"#types"},{"name":"entity.name.type.kd","match":"\\w+"}]}}},"enum":{"name":"meta.definition.enum.kd","match":"^\\s*(?:(pub)?\\s+)?(enum)\\s+(?:\\w+\\.)?(\\w*)","captures":{"1":{"name":"storage.modifier.$1.kd"},"2":{"name":"storage.type.enum.kd"},"3":{"name":"entity.name.enum.kd"}}},"interface":{"name":"meta.definition.interface.kd","match":"^\\s*(?:(pub)?\\s+)?(interface)\\s+(\\w*)","captures":{"1":{"name":"storage.modifier.$1.kd"},"2":{"name":"keyword.interface.kd"},"3":{"patterns":[{"include":"#illegal-name"},{"name":"entity.name.interface.kd","match":"\\w+"}]}}},"struct":{"patterns":[{"name":"meta.definition.struct.kd","begin":"^\\s*(?:(mut|pub(?:\\s+mut)?|__global)\\s+)?(struct|union)\\s+([\\w.]+)\\s*|({)","beginCaptures":{"1":{"name":"storage.modifier.$1.kd"},"2":{"name":"storage.type.struct.kd"},"3":{"name":"entity.name.type.kd"},"4":{"name":"punctuation.definition.bracket.curly.begin.kd"}},"end":"\\s*|(})","endCaptures":{"1":{"name":"punctuation.definition.bracket.curly.end.kd"}},"patterns":[{"include":"#struct-access-modifier"},{"match":"\\b(\\w+)\\s+([\\w\\[\\]\\*&.]+)(?:\\s*(=)\\s*((?:.(?=$|//|/\\*))*+))?","captures":{"1":{"name":"variable.other.property.kd"},"2":{"patterns":[{"include":"#numbers"},{"include":"#brackets"},{"include":"#types"},{"match":"\\w+","name":"storage.type.other.kd"}]},"3":{"name":"keyword.operator.assignment.kd"},"4":{"patterns":[{"include":"$self"}]}}},{"include":"#types"},{"include":"$self"}]},{"name":"meta.definition.struct.kd","match":"^\\s*(?:(mut|pub(?:\\s+mut)?|__global))\\s+?(struct)\\s+(?:\\s+([\\w.]+))?","captures":{"1":{"name":"storage.modifier.$1.kd"},"2":{"name":"storage.type.struct.kd"},"3":{"name":"entity.name.struct.kd"}}}]},"struct-access-modifier":{"match":"(?<=\\s|^)(mut|pub(?:\\s+mut)?|__global)(:|\\b)","captures":{"1":{"name":"storage.modifier.$1.kd"},"2":{"name":"punctuation.separator.struct.key-value.kd"}}},"punctuation":{"patterns":[{"name":"punctuation.delimiter.period.dot.kd","match":"\\."},{"name":"punctuation.delimiter.comma.kd","match":","},{"name":"punctuation.separator.key-value.colon.kd","match":":"},{"name":"punctuation.definition.other.semicolon.kd","match":";"},{"name":"punctuation.definition.other.questionmark.kd","match":"\\?"},{"name":"punctuation.hash.kd","match":"#"}]},"keywords":{"patterns":[{"name":"keyword.control.kd","match":"(\\$if|\\$else)"},{"name":"keyword.control.kd","match":"(?<!@)\\b(as|it|is|in|or|break|continue|default|unsafe|match|if|else|for|go|goto|defer|return|shared|select|rlock|lock|atomic|asm)\\b"},{"name":"keyword.$1.kd","match":"(?<!@)\\b(fn|type|typeof|enum|struct|interface|map|assert|sizeof|__offsetof)\\b"}]},"storage":{"name":"storage.modifier.kd","match":"\\b(const|mut|pub)\\b"},"types":{"patterns":[{"name":"storage.type.numeric.kd","match":"(?<!\\.)\\b(i(8|16|nt|64|128)|u(8|16|32|64|128)|f(32|64))\\b"},{"name":"storage.type.$1.kd","match":"(?<!\\.)\\b(bool|byte|byteptr|charptr|voidptr|string|ustring|rune)\\b"}]},"operators":{"patterns":[{"name":"keyword.operator.arithmetic.kd","match":"(\\+|\\-|\\*|\\/|\\%|\\+\\+|\\-\\-|\\>\\>|\\<\\<)"},{"name":"keyword.operator.relation.kd","match":"(\\=\\=|\\!\\=|\\>|\\<|\\>\\=|\\<\\=)"},{"name":"keyword.operator.assignment.kd","match":"(\\:\\=|\\=|\\+\\=|\\-\\=|\\*\\=|\\/\\=|\\%\\=|\\&\\=|\\|\\=|\\^\\=|\\~\\=|\\&\\&\\=|\\|\\|\\=|\\>\\>\\=|\\<\\<\\=)"},{"name":"keyword.operator.bitwise.kd","match":"(\\&|\\||\\^|\\~|<(?!<)|>(?!>))"},{"name":"keyword.operator.logical.kd","match":"(\\&\\&|\\|\\||\\!)"},{"name":"keyword.operator.optional.kd","match":"\\?"}]},"numbers":{"patterns":[{"name":"constant.numeric.exponential.kd","match":"([0-9]+(_?))+(\\.)([0-9]+[eE][-+]?[0-9]+)"},{"name":"constant.numeric.float.kd","match":"([0-9]+(_?))+(\\.)([0-9]+)"},{"name":"constant.numeric.binary.kd","match":"(?:0b)(?:(?:[0-1]+)(?:_?))+"},{"name":"constant.numeric.octal.kd","match":"(?:0o)(?:(?:[0-7]+)(?:_?))+"},{"name":"constant.numeric.hex.kd","match":"(?:0x)(?:(?:[0-9a-fA-F]+)(?:_?))+"},{"name":"constant.numeric.integer.kd","match":"(?:(?:[0-9]+)(?:[_]?))+"}]},"punctuations":{"patterns":[{"name":"punctuation.accessor.kd","match":"(?:\\.)"},{"name":"punctuation.separator.comma.kd","match":"(?:,)"}]},"strings":{"patterns":[{"begin":"`","end":"`","name":"string.quoted.rune.kd","patterns":[{"include":"#string-escaped-char"},{"include":"#string-interpolation"},{"include":"#string-placeholder"}]},{"begin":"(r)'","beginCaptures":{"1":{"name":"storage.type.string.kd"}},"end":"'","name":"string.quoted.raw.kd","patterns":[{"include":"#string-interpolation"},{"include":"#string-placeholder"}]},{"begin":"(r)\"","beginCaptures":{"1":{"name":"storage.type.string.kd"}},"end":"\"","name":"string.quoted.raw.kd","patterns":[{"include":"#string-interpolation"},{"include":"#string-placeholder"}]},{"begin":"(c?)'","beginCaptures":{"1":{"name":"storage.type.string.kd"}},"end":"'","name":"string.quoted.kd","patterns":[{"include":"#string-escaped-char"},{"include":"#string-interpolation"},{"include":"#string-placeholder"}]},{"begin":"(c?)\"","beginCaptures":{"1":{"name":"storage.type.string.kd"}},"end":"\"","name":"string.quoted.kd","patterns":[{"include":"#string-escaped-char"},{"include":"#string-interpolation"},{"include":"#string-placeholder"}]}]},"string-escaped-char":{"patterns":[{"name":"constant.character.escape.kd","match":"\\\\([0-7]{3}|[\\$abfnrtv\\\\'\"]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})"},{"name":"invalid.illegal.unknown-escape.kd","match":"\\\\[^0-7\\$xuUabfnrtv\\'\"]"}]},"string-interpolation":{"name":"meta.string.interpolation.kd","match":"(\\$([\\w.]+|\\{.*?\\}))","captures":{"1":{"patterns":[{"name":"invalid.illegal.kd","match":"\\$\\d[\\.\\w]+"},{"name":"variable.other.interpolated.kd","match":"\\$([\\.\\w]+|\\{.*?\\})"}]}}},"string-placeholder":{"match":"%(\\[\\d+\\])?([\\+#\\-0\\x20]{,2}((\\d+|\\*)?(\\.?(\\d+|\\*|(\\[\\d+\\])\\*?)?(\\[\\d+\\])?)?))?[vT%tbcdoqxXUbeEfFgGsp]","name":"constant.other.placeholder.kd"},"illegal-name":{"match":"\\d\\w+","name":"invalid.illegal.kd"}}}
